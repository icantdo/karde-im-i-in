<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <title>Küçük Karaoke - Gömülü Ses</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body>
  <h1>Küçük Karaoke</h1>
  <p>Sayfadaki oynat tuşuna bas: arkada şarkı çalarken sözler <strong>harf harf</strong> yazacaktır.</p>

  <!-- 1) MP3'ünü aynı klasöre koy ve dosya adını buraya yaz -->
  <audio id="audio" src="music.mp3" preload="metadata" controls
         style="display:block; margin:10px 0;"></audio>

  <hr/>
  <div id="nowline"  style="font-size:28px; font-family:monospace; white-space:pre-wrap;"></div>
  <div id="nextline" style="opacity:.6; font-family:monospace; margin-top:8px;"></div>

  <!-- 2) LRC'ni buraya yapıştır (senin paylaştığın .lrc içeriğini koyabilirsin) -->
    <script id="lrc-data" type="text/plain">
[00:15.00]I wanna rock right now
[00:16.90]I wanna, I wanna rock right now
[00:18.60]I wanna, I wanna rock right now
[00:20.40]Now, now, rock right now
[00:22.50]I wanna, I wanna rock right now
[00:24.20]I wanna, I wanna rock right now
[00:26.20]I wanna, I wanna rock right now
[00:30.90]I wanna da-, I wanna dance in the lights
[00:34.50]I wanna ro-, I wanna rock yo' body right
[00:38.60]I wanna go, I wanna go for a ride
[00:42.00]Hop in the music and rock yo' body right
[00:46.10]Rock that body, c'mon c'mon, rock that body (Rock yo' body)
[00:49.00]Rock that body, c'mon c'mon, rock that body
[00:51.00]Rock that body, c'mon c'mon, rock that body (Rock yo' body)
[00:53.70]Rock that body, c'mon c'mon, rock that body
[00:56.80]Rock that body, c'mon c'mon, rock that body
[01:00.30]Let me see your body rock
[01:02.20]Shakin' from the bottom and top
[01:04.00]Freak to what the DJ drop
[01:05.90]We be the ones to make it hot (to make it hot)
[01:08.80]Electric shock, energy like a billion watts
[01:11.70]Space be booming, the speakers pop
[01:13.60]Galactic comb and Mr. Spock
[01:15.80]We bumping in your parking lot
[01:17.70]When you comin up in the spot
[01:19.40]Don't bring nothin' we call P. Dot
[01:21.40]Cause we burning around the clock
[01:23.30]Hit the lights and then turn them off
[01:25.20]If you bring that don't make you stop
[01:27.00]Like the jungle, we run the block
[01:28.90]No-one rolling the way we rock, way we rock
[01:31.90]I wanna rock right now
[01:33.40]I wanna, I wanna rock right now
[01:35.30]I wanna, I wanna rock right now
[01:39.80]I wanna da-, I wanna dance in the lights
[01:43.50]I wanna ro-, I wanna rock yo' body right
[01:47.60]I wanna go, I wanna go for a ride
[01:51.40]Hop in the music and rock yo' body right
[01:55.00]Rock that body, c'mon c'mon, rock that body (Rock that body)
[01:58.80]Rock that body, c'mon c'mon, rock that body
[02:02.60]Rock that body, c'mon c'mon, rock that body (Rock yo' body)
[02:05.60]Rock that body, c'mon c'mon, rock that body
[02:09.80]Superfly ladies, all of my superfly ladies
[02:13.30]All of my superfly ladies
[02:15.20]All of my super, superfly ladies
[02:17.80]Yeah, you could be big boned
[02:20.00]Long as you feel like you on
[02:21.80]You could be the model type, skinny with no appetite
[02:25.70]Short, stacked, black or white
[02:27.60]Long as you do what you like
[02:29.40]Body outta sight, body, body outta sight
[02:32.60]Yeah
[02:32.80]She does the two step, and the tongue drop
[02:35.00]She does the cabbage patch, and the bus stop
[02:36.90]She like electro, she love hip-hop
[02:38.70]She like the reggae, she feel punk rock
[02:40.70]She love samba, and the mambo
[02:42.60]She like to breakdance, and calypso
[02:44.50]Get a lil' crazy, get a lil' stupid
[02:46.60]Get a lil' crazy, crazy, crazy
[02:48.80]I wanna da-, I wanna dance in the lights
[02:52.30]I wanna ro-, I wanna rock yo' body right
[02:56.70]I wanna go, I wanna go for a ride
[03:00.10]Hop in the music and rock yo' body right
[03:08.80]Rock yo' body right (Sat upright)
[03:16.60]Rock yo' body right (Sat upright)
[03:22.50]C'mon, yeah
[03:27.40]Rock that body, c'mon c'mon, rock that body
[03:30.30]C'mon, yeah
[03:31.20]Rock that body, c'mon c'mon, rock that body
[03:34.20]Go oh oh oh, oh-oh-oh
[03:38.40]Let go oh oh oh, oh-oh-oh
[03:42.00]Let go oh oh oh, oh-oh-oh
[03:45.70]Let go oh oh oh, oh-oh-oh
[03:49.90]I wanna, I wanna rock right now
[03:53.10]I wanna, I wanna rock
[03:55.00]I wanna, I wanna rock
[03:57.20]Let go oh oh oh, oh-oh-oh
[04:00.00]I wanna, I wanna rock
[04:03.00]I wanna, I wanna rock
[04:05.10]Let go oh oh oh, oh-oh-oh
[04:09.20]Let go oh oh oh, oh-oh-oh
[04:12.70]I wanna, I wanna rock right now
[04:14.60]I wanna, I wanna rock right now
[04:16.60]I wanna, I wanna rock right now
[04:18.50]Now, now, rock right now
[04:20.50]I wanna, I wanna rock right now
[04:22.30]I wanna, I wanna rock right now
[04:24.40]I wanna, I wanna rock right now

  </script>


  <script>
  // --- Basit LRC ayrıştırıcı ---
  function parseLRC(text) {
    if (!text) return [];
    const lines = text.replace(/\r\n?/g, "\n").split("\n");
    const events = [];
    const tsRe = /\[(\d+):(\d+)(?:[\.|:](\d+))?\]/g;
    for (const raw of lines) {
      const line = raw.trim();
      if (!line) continue;
      if (/^\[[a-zA-Z]+:/.test(line)) continue; // [ti:], [ar:] gibi meta etiketlerini atla

      let m; const stamps = [];
      while ((m = tsRe.exec(line)) !== null) {
        const mm = parseInt(m[1], 10) || 0;
        const ss = parseInt(m[2], 10) || 0;
        const frac = m[3] || "";
        let f = 0;
        if (frac) {
          if (frac.length === 2) f = parseInt(frac, 10) / 100;    // cs
          else if (frac.length === 3) f = parseInt(frac, 10) / 1000; // ms
          else f = parseInt(frac, 10) / Math.pow(10, frac.length);
        }
        stamps.push(mm * 60 + ss + f);
      }
      const lyric = line.replace(tsRe, "").trim();
      if (!stamps.length) continue;
      for (const t of stamps) events.push({ time: t, text: lyric });
    }
    events.sort((a,b) => a.time - b.time);
    return events;
  }

  // Verilen t anında aktif satırın index'i (son time <= t)
  function findEventIndex(events, t) {
    let lo = 0, hi = events.length - 1, ans = -1;
    while (lo <= hi) {
      const mid = (lo + hi) >> 1;
      if (events[mid].time <= t) { ans = mid; lo = mid + 1; }
      else hi = mid - 1;
    }
    return ans;
  }

  const audio = document.getElementById('audio');
  const nowEl = document.getElementById('nowline');
  const nextEl = document.getElementById('nextline');

  const EVENTS = parseLRC(document.getElementById('lrc-data').textContent || "");

  let rafId = null;
  function step() {
    const t = audio.currentTime || 0;
    const idx = findEventIndex(EVENTS, t);
    if (idx >= 0) {
      const cur = EVENTS[idx];
      const next = EVENTS[idx + 1];
      const t0 = cur.time;
      const t1 = (next ? next.time : (isFinite(audio.duration) ? audio.duration : t0 + 2));
      const span = Math.max(0.3, t1 - t0); // en az 0.3s yazma süresi
      const full = cur.text || "";
      const n = full.length;
      let shown = n;
      if (n > 0) {
        const progress = Math.max(0, Math.min(1, (t - t0) / span));
        shown = Math.floor(progress * n);
      }
      nowEl.textContent = full.slice(0, shown);
      nextEl.textContent = (next && next.text) ? next.text : "";
    } else {
      nowEl.textContent = "";
      nextEl.textContent = (EVENTS[0] ? EVENTS[0].text : "");
    }
    rafId = requestAnimationFrame(step);
  }

  // Oynat/duraklat olaylarına bağlan: kullanıcı play'e basınca animasyonu başlat
  audio.addEventListener('play', () => {
    if (rafId === null) rafId = requestAnimationFrame(step);
  });
  audio.addEventListener('pause', () => {
    if (rafId !== null) { cancelAnimationFrame(rafId); rafId = null; }
  });
  audio.addEventListener('ended', () => {
    if (rafId !== null) { cancelAnimationFrame(rafId); rafId = null; }
  });
  </script>
</body>
</html>
